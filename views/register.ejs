<!DOCTYPE html>
<html>
  <head>
      <% include ./header.ejs %>
      <script>
          $(document).ready(function() {
              var UserType = $('input[name=UserType]:checked');
              var Name = $('input[name=Name]');
              var Birth = $('input[name=Birth]');
              var Email = $('input[name=Email]');
              var Tel = $('input[name=Tel]');
              var Pwd = $('input[name=Password]');
              var Pwd2 = $('input[name=Password2]');
              var inputs = [UserType, Name, Birth, Email, Tel, Pwd, Pwd2];
              console.log('checked: ', UserType.val());
              $('input[type=submit]').on('click', function(e) {
                  console.log('checked2: ', UserType.val());
                  for (var i = 0; i < inputs.length; i++) {
                      if (inputs[i].val() == '') {
                          e.preventDefault();
                          alert('입력하지 않은 정보가 있습니다.');
                          inputs[i].focus();
                          return;
                      }
                  }
                  if (UserType.val() == 'EE' && Email.val().indexOf("ac.kr") == -1) {
                      e.preventDefault();
                      alert('학교 이메일을 입력해 주세요!');
                      Email.focus();
                  } else if (inputs[5].val().length < 4) {
                      e.preventDefault();
                      alert('비밀번호는 4자리 이상 입력해주세요.');
                      Pwd.focus();
                  } else if (Pwd.val() != Pwd2.val()) {
                      e.preventDefault();
                      alert('비밀번호가 서로 다릅니다.');
                      Pwd.focus();
                  }
              });
          });
      </script>
  </head>
  <body class="bg-dark sidenav-toggled" style="overflow:hidden">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
        <% include ./nav.ejs %>
    </nav>
    <div class="container">
      <div class="card card-register mx-auto mt-5">
        <div class="card-header">회원가입</div>
        <div class="card-body">
          <form action="register" method="post">
            <div class="text-center mb-3">
               <label class="radio-inline" style="margin-right:30px;">
                 <input type="radio" name="UserType" value="ER" checked> 발주자(기업)
               </label>
               <label class="radio-inline">
                 <input type="radio" name="UserType" value="EE"> 수주자(학생)
               </label>
            </div>
            <div class="form-group">
              <div class="form-row">
                <div class="col-md-6">
                 <label for="Name">이름</label>
                 <input class="form-control" name="Name" type="text" aria-describedby="nameHelp" placeholder="이름을 입력해주세요.">
                </div>
                <div class="col-md-6">
                 <label for="Birth">생년월일</label>
                 <input class="form-control" name="Birth" type="text" placeholder="ex)19940101">
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="Email">이메일(아이디)</label>
              <input class="form-control" name="Email" type="email" aria-describedby="emailHelp" placeholder="학교 이메일을 입력해주세요.">
            </div>
            <div class="form-group">
              <label for="Tel">전화번호</label>
              <input class="form-control" name="Tel" type="tel" placeholder="ex) 010-1234-5678">
            </div>
            <div class="form-group">
              <label for="Password">비밀번호</label>
              <input class="form-control" name="Password" type="password" aria-describedby="pwdHelp" placeholder="비밀번호를 입력해주세요.">
            </div>
            <div class="form-group">
              <label for="Password2">비밀번호 확인</label>
              <input class="form-control" name="Password2" type="password" aria-describedby="pwdHelp" placeholder="비밀번호를 확인해주세요.">
            </div>
            <input type="submit" class="btn btn-success btn-block" value="가입하기" />
          </form>
        </div>
      </div>
    </div>

    <h1>가입에 성공하셨습니다!</h1>
    <a class="btn btn-primary btn-lg" href="/login">로그인</a>
  </body>
</html>
